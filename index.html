<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>M√©t√©o App</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <!-- FontAwesome pour les ic√¥nes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ton CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- HEADER -->
    <header class="header-meteo text-center py-4">
        <h1>üåç M√©t√©o en Direct</h1>
        <p>Pr√©visions pr√©cises pour votre ville</p>
    </header>

    <div class="container my-4">
        <h1 class="text-center mb-4" id="main-title">üå§Ô∏è Entrez une ville pour voir la m√©t√©o</h1>

        <!-- Message d'erreur -->
        <div id="error-message" class="alert alert-danger text-center mb-4" style="display: none;"></div>

        <!-- FORMULAIRE DE RECHERCHE -->
        <div class="search-wrapper mb-5 position-relative mx-auto" style="max-width: 600px;">
            <div class="input-group input-group-lg">
                <input type="text" id="city-search" class="form-control" placeholder="Entrez une ville (ex: Paris, France)..." autocomplete="off">
                <button id="btn-search" class="btn btn-primary">Rechercher</button>
            </div>
            <div id="suggestions-container" class="list-group position-absolute w-100" style="z-index: 1000; top: 100%;"></div>
        </div>

        <!-- CONTENU M√âT√âO (Cach√© par d√©faut) -->
        <div id="weather-content" style="display: none;">
            
            <div class="row g-4">
                <!-- 1. Informations principales -->
                <div class="col-md-6">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <h2 class="card-title fw-bold"><span id="loc-name"></span>, <span id="loc-country"></span></h2>
                            <p class="text-muted mb-4"><span id="loc-region"></span> - <span id="loc-tz"></span></p>
                            
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <img id="weather-icon" src="" alt="Icone" width="80" class="me-3">
                                <div class="text-start">
                                    <h3 class="mb-0" id="weather-text"></h3>
                                    <p class="fs-1 fw-bold mb-0"><span id="temp-c"></span>¬∞C</p>
                                    <small class="text-muted">Ressenti : <span id="feelslike-c"></span>¬∞C</small>
                                </div>
                            </div>

                            <div class="row mt-4 pt-3 border-top">
                                <div class="col-6">
                                    <p class="mb-1"><i class="fas fa-sun text-warning"></i> Lever</p>
                                    <strong id="astro-sunrise">--:--</strong>
                                </div>
                                <div class="col-6">
                                    <p class="mb-1"><i class="fas fa-moon text-secondary"></i> Coucher</p>
                                    <strong id="astro-sunset">--:--</strong>
                                </div>
                            </div>
                            
                            <p class="mt-3 text-muted small">Lat: <span id="loc-lat"></span> | Lon: <span id="loc-lon"></span></p>
                        </div>
                    </div>
                </div>

                <!-- 2. D√©tails m√©t√©o complets -->
                <div class="col-md-6">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body">
                            <h4 class="card-title mb-4 border-bottom pb-2">D√©tails m√©t√©o</h4>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üí® Vent</span>
                                    <strong><span id="wind-kph"></span> km/h (<span id="wind-dir"></span>)</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üå¨Ô∏è Rafales</span>
                                    <strong><span id="gust-kph"></span> km/h</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üíß Humidit√©</span>
                                    <strong><span id="humidity"></span>%</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üå°Ô∏è Pression</span>
                                    <strong><span id="pressure"></span> hPa</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>‚òî Pluie</span>
                                    <strong><span id="precip"></span> mm</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üå´Ô∏è Point de ros√©e</span>
                                    <strong><span id="dewpoint"></span>¬∞C</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>üëÄ Visibilit√©</span>
                                    <strong><span id="vis-km"></span> km</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>‚òÄÔ∏è Indice UV</span>
                                    <strong><span id="uv"></span></strong>
                                </li>
                            </ul>
                            <p class="text-end mt-3 text-muted small">Mise √† jour : <span id="last-updated"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Carte Leaflet -->
            <h3 class="mt-5 mb-3 border-start border-4 border-primary ps-3">La carte</h3>
            <div id="map" class="rounded shadow-sm"></div>

            <!-- 4. Graphique -->
            <h3 class="mt-5 mb-3 border-start border-4 border-primary ps-3">√âvolution temp√©rature (24h)</h3>
            <div class="card p-3 shadow-sm">
                <canvas id="hourlyWeatherChart"></canvas>
            </div>

            <!-- 5. Tableau Heure par Heure -->
            <h3 class="mt-5 mb-3 border-start border-4 border-primary ps-3">D√©tails heure par heure</h3>
            <div class="table-responsive shadow-sm rounded">
                <table class="table table-bordered text-center table-hover mb-0 bg-white">
                    <thead class="table-dark" id="table-head-row">
                        <!-- Rempli par JS -->
                    </thead>
                    <tbody id="table-body">
                        <!-- Rempli par JS -->
                    </tbody>
                </table>
            </div>

            <!-- 6. Pr√©visions Jours Suivants -->
            <h3 class="mt-5 mb-3 border-start border-4 border-primary ps-3">Pr√©visions 3 Jours</h3>
            <div class="row g-4" id="forecast-container">
                <!-- Rempli par JS -->
            </div>

        </div> <!-- Fin weather-content -->
    </div>

    <!-- FOOTER -->
    <footer class="footer-meteo text-center mt-5 py-4">
        <p>Powered by <a class="lien-footer fw-bold" href="https://www.weatherapi.com/" target="_blank">WeatherAPI.com</a></p>
        <a href="https://www.weatherapi.com/" target="_blank">
            <img src="https://cdn.weatherapi.com/v4/images/weatherapi_logo.png" alt="Weather data by WeatherAPI.com">
        </a>
        <p class="mt-2 text-muted">D√©velopp√© avec Symfony & JS</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>